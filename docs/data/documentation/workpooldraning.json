{"metadata":{"role":"collection","externalID":"WorkPoolDraning","roleHeading":"Framework","title":"WorkPoolDraning","modules":[{"name":"WorkPoolDraning"}],"symbolKind":"module"},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning"},"hierarchy":{"paths":[[]]},"sections":[],"abstract":[{"text":"This package aim to help with execution of big amount of tasks, but limit number of simultaneously executed tasks.","type":"text"}],"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","level":2,"type":"heading","anchor":"Overview"},{"type":"paragraph","inlineContent":[{"text":"Package provides few work pools, depending on knowledge of input tasks beforehand.","type":"text"},{"text":" ","type":"text"},{"type":"text","text":"All work pools in package are "},{"type":"codeVoice","code":"AsyncSequence"},{"type":"text","text":", which works on push approach. It means that work will be executed even if no one iterate over it."}]},{"level":2,"text":"How to choose correct work pool?","anchor":"How-to-choose-correct-work-pool","type":"heading"},{"type":"paragraph","inlineContent":[{"text":"Package contains 2 type of pools: static and dynamic. Dynamic pool allow you to add work tasks while it is executing.","type":"text"},{"type":"text","text":" "},{"type":"text","text":"Static pool on other hand execute same task on predefined collection of elements."}]},{"type":"paragraph","inlineContent":[{"text":"On top of that, choose which basis you want: DispatchQueue or Structured Concurrency.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Decision tree:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Static + DispatchQueue: "},{"identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/StaticSyncWorkPoolDrainer","isActive":true,"type":"reference"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Static + Structured Concurrency: "},{"identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/StaticAsyncWorkPoolDrainer","isActive":true,"type":"reference"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Dynamic + Structured Concurrency: ","type":"text"},{"identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/DynamicAsyncWorkPoolDrainer","isActive":true,"type":"reference"}]}]}]},{"text":"Process existed collection","anchor":"Process-existed-collection","type":"heading","level":2},{"inlineContent":[{"type":"text","text":"Also you can use "},{"type":"codeVoice","code":"process"},{"type":"text","text":" method on "},{"type":"codeVoice","code":"Collection"},{"text":" or ","type":"text"},{"code":"AsyncSequence","type":"codeVoice"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"Keep in mind that closure might be called in random order, depending on an execution speed of each process call."}],"type":"paragraph"},{"syntax":null,"code":["try await array.process(limitingMaxConcurrentOperationCountTo: 5, { ... })"],"type":"codeListing"},{"text":"Why?","anchor":"Why","level":2,"type":"heading"},{"inlineContent":[{"type":"text","text":"Why do we need this package, if we have TaskGroup?"}],"type":"paragraph"},{"inlineContent":[{"code":"TaskGroup","type":"codeVoice"},{"type":"text","text":" do not allow to limit number of simultaneous executions, which is important in some cases:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Internet bandwidth is limited, no reason to trigger unlimited amount of connections"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Storage bandwidth is limited, no reason to start thousands of read\/write operations at the same time","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Needs to limit CPU usage, because you need to use mac, while it executes long running tasks in background"}]}]},{"content":[{"inlineContent":[{"text":"Define QoS not always enough, as you might want to have more control over number of simultaneous executions and do not depend on QoS evristics","type":"text"}],"type":"paragraph"}]}]}]}],"kind":"symbol","topicSections":[{"title":"Work Pool Drainers","identifiers":["doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/DynamicAsyncWorkPoolDrainer","doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/StaticAsyncWorkPoolDrainer","doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/StaticSyncWorkPoolDrainer"]},{"title":"Protocols","identifiers":["doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/WorkPoolDrainer"]},{"identifiers":["doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/AsyncDrainerIterator"],"title":"Structures"},{"identifiers":["doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/WorkPoolDrainerError"],"title":"Enumerations"},{"identifiers":["doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/Swift","doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/_Concurrency"],"title":"Extended Modules"}],"schemaVersion":{"minor":3,"major":0,"patch":0},"variants":[{"paths":["\/documentation\/workpooldraning"],"traits":[{"interfaceLanguage":"swift"}]}],"references":{"doc://WorkPoolDraning/documentation/WorkPoolDraning/AsyncDrainerIterator":{"type":"topic","title":"AsyncDrainerIterator","navigatorTitle":[{"text":"AsyncDrainerIterator","kind":"identifier"}],"fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"text":"AsyncDrainerIterator","kind":"identifier"}],"role":"symbol","abstract":[],"kind":"symbol","identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/AsyncDrainerIterator","url":"\/documentation\/workpooldraning\/asyncdraineriterator"},"doc://WorkPoolDraning/documentation/WorkPoolDraning/DynamicAsyncWorkPoolDrainer":{"title":"DynamicAsyncWorkPoolDrainer","kind":"symbol","identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/DynamicAsyncWorkPoolDrainer","abstract":[{"type":"text","text":"Drain dynamically sized pool of work, limiting number of simultaneous executions"}],"type":"topic","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"DynamicAsyncWorkPoolDrainer"}],"url":"\/documentation\/workpooldraning\/dynamicasyncworkpooldrainer","navigatorTitle":[{"kind":"identifier","text":"DynamicAsyncWorkPoolDrainer"}],"role":"symbol"},"doc://WorkPoolDraning/documentation/WorkPoolDraning/WorkPoolDrainerError":{"title":"WorkPoolDrainerError","type":"topic","role":"symbol","kind":"symbol","navigatorTitle":[{"kind":"identifier","text":"WorkPoolDrainerError"}],"url":"\/documentation\/workpooldraning\/workpooldrainererror","abstract":[],"identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/WorkPoolDrainerError","fragments":[{"kind":"keyword","text":"enum"},{"text":" ","kind":"text"},{"kind":"identifier","text":"WorkPoolDrainerError"}]},"doc://WorkPoolDraning/documentation/WorkPoolDraning/Swift":{"kind":"symbol","role":"collection","abstract":[],"type":"topic","identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/Swift","url":"\/documentation\/workpooldraning\/swift","title":"Swift"},"doc://WorkPoolDraning/documentation/WorkPoolDraning":{"url":"\/documentation\/workpooldraning","type":"topic","kind":"symbol","title":"WorkPoolDraning","identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning","role":"collection","abstract":[{"type":"text","text":"This package aim to help with execution of big amount of tasks, but limit number of simultaneously executed tasks."}]},"doc://WorkPoolDraning/documentation/WorkPoolDraning/WorkPoolDrainer":{"title":"WorkPoolDrainer","kind":"symbol","url":"\/documentation\/workpooldraning\/workpooldrainer","abstract":[],"identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/WorkPoolDrainer","role":"symbol","type":"topic","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"text":"WorkPoolDrainer","kind":"identifier"}],"navigatorTitle":[{"text":"WorkPoolDrainer","kind":"identifier"}]},"doc://WorkPoolDraning/documentation/WorkPoolDraning/_Concurrency":{"type":"topic","identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/_Concurrency","role":"collection","kind":"symbol","abstract":[],"url":"\/documentation\/workpooldraning\/_concurrency","title":"_Concurrency"},"doc://WorkPoolDraning/documentation/WorkPoolDraning/StaticAsyncWorkPoolDrainer":{"abstract":[{"type":"text","text":"Executed async process block on predefined stack of elements, limiting number of simultaneous executions"}],"title":"StaticAsyncWorkPoolDrainer","type":"topic","navigatorTitle":[{"text":"StaticAsyncWorkPoolDrainer","kind":"identifier"}],"role":"symbol","identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/StaticAsyncWorkPoolDrainer","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"StaticAsyncWorkPoolDrainer"}],"kind":"symbol","url":"\/documentation\/workpooldraning\/staticasyncworkpooldrainer"},"doc://WorkPoolDraning/documentation/WorkPoolDraning/StaticSyncWorkPoolDrainer":{"role":"symbol","title":"StaticSyncWorkPoolDrainer","abstract":[{"type":"text","text":"Executed sync process block on predefined stack of elements, limiting number of simultaneous executions"}],"identifier":"doc:\/\/WorkPoolDraning\/documentation\/WorkPoolDraning\/StaticSyncWorkPoolDrainer","navigatorTitle":[{"text":"StaticSyncWorkPoolDrainer","kind":"identifier"}],"url":"\/documentation\/workpooldraning\/staticsyncworkpooldrainer","kind":"symbol","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"StaticSyncWorkPoolDrainer","kind":"identifier"}],"type":"topic"}}}